<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√¨nh Theo D√µi T·∫≠p Gym</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4a90e2"/>
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
</head>
<body>
    <main>
        <!-- Authentication Container -->
        <div id="auth-container" class="container">
            <div class="auth-header">
                <h1>üèãÔ∏è Gym Workout Tracker</h1>
            </div>
            <h2>Ch√†o m·ª´ng b·∫°n!</h2>
            <p>ƒêƒÉng nh·∫≠p ƒë·ªÉ ƒë·ªìng b·ªô d·ªØ li·ªáu t·∫≠p luy·ªán c·ªßa b·∫°n tr√™n m·ªçi thi·∫øt b·ªã.</p>
            <div class="auth-buttons">
                <button id="login-google-btn">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo">
                    <span>ƒêƒÉng nh·∫≠p v·ªõi Google</span>
                </button>
                <button id="login-email-btn">ƒêƒÉng nh·∫≠p v·ªõi Email</button>
            </div>
        </div>

        <!-- Main App Content -->
        <div id="app-content" class="hidden">
            <!-- User Info & Theme Toggle -->
            <div class="app-header">
                <div id="user-info" class="hidden" style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                    <span id="user-display-name" style="font-weight: bold;"></span>
                    <button id="logout-btn" class="btn btn-secondary">ƒêƒÉng xu·∫•t</button>
                </div>
                
                <!-- Theme Toggle -->
                <div class="theme-toggle">
                    <button class="theme-btn" data-theme="light">‚òÄÔ∏è</button>
                    <button class="theme-btn" data-theme="dark">üåô</button>
                    <button class="theme-btn" data-theme="green">üü¢</button>
                    <button class="theme-btn" data-theme="purple">üü£</button>
                    <button class="theme-btn" data-theme="orange">üü†</button>
                    <button class="theme-btn" data-theme="red">üî¥</button>
                </div>
            </div>
            
            <!-- Main Grid Layout -->
            <div class="main-grid">
                <!-- Left Column - Workout Form -->
                <div class="main-column">
                    <div class="workout-form-container card">
                        <h1>üìù Tr√¨nh theo d√µi t·∫≠p Gym</h1>
                
                        <form id="workout-form">
                            <div class="form-group">
                                <label for="workout-date">Ng√†y t·∫≠p</label>
                                <input type="date" id="workout-date" required>
                            </div>

                            <div class="form-group">
                                <label for="muscle-group">Nh√≥m c∆°</label>
                                <select id="muscle-group" required>
                                    <option value="">-- Ch·ªçn nh√≥m c∆° --</option>
                                    <option value="Ng·ª±c">Ng·ª±c (Chest)</option>
                                    <option value="L∆∞ng">L∆∞ng (Back)</option>
                                    <option value="Ch√¢n">Ch√¢n (Legs)</option>
                                    <option value="Tay">Tay (Arms)</option>
                                    <option value="B·ª•ng">B·ª•ng (Abs)</option>
                                    <option value="Vai">Vai (Shoulders)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="exercise-name">T√™n b√†i t·∫≠p</label>
                                <input type="text" id="exercise-name" placeholder="VD: Bench Press, Pull-up, Push-up..." required>
                            </div>

                            <!-- 3D Exercise Illustration -->
                            <div class="exercise-illustration" id="exercise-illustration" style="display: none;">
                                <div class="exercise-3d-model" id="exercise-3d-model">
                                    üí™
                                </div>
                                <div class="exercise-info-overlay">
                                    <h4 id="exercise-name-display">Ch·ªçn b√†i t·∫≠p</h4>
                                    <p id="exercise-description">Nh·∫≠p t√™n b√†i t·∫≠p ƒë·ªÉ xem minh h·ªça</p>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="exercise-type">Lo·∫°i b√†i t·∫≠p</label>
                                <select id="exercise-type" required>
                                    <option value="">-- Ch·ªçn lo·∫°i b√†i t·∫≠p --</option>
                                    <option value="weight">C√≥ t·∫° (Weight Training)</option>
                                    <option value="bodyweight">Kh√¥ng t·∫° (Bodyweight)</option>
                                    <option value="assisted">C√≥ h·ªó tr·ª£ kh·ªëi l∆∞·ª£ng (Assisted)</option>
                                </select>
                            </div>

                            <div class="form-group" id="equipment-group">
                                <label for="equipment">M√°y t·∫≠p / D·ª•ng c·ª•</label>
                                <input type="text" id="equipment" placeholder="VD: T·∫° ƒë√≤n, X√† ƒë∆°n, M√°y h·ªó tr·ª£, D√¢y kh√°ng l·ª±c...">
                            </div>

                            <div class="sets-section">
                                <div class="sets-header">
                                    <h3>Chi ti·∫øt c√°c Set</h3>
                                    <button type="button" id="add-set" class="btn btn-secondary">+ Th√™m Set</button>
                                </div>
                                <div id="sets-container">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="notes">Ghi ch√∫ th√™m</label>
                                <textarea id="notes" placeholder="C·∫£m nh·∫≠n, k·ªπ thu·∫≠t..."></textarea>
                            </div>

                            <button type="submit" class="btn btn-primary">L∆∞u b√†i t·∫≠p</button>
                        </form>
                    </div>
                </div>

                <!-- Right Column - AI & History -->
                <div class="main-column">
                    <!-- AI Assistant -->
                    <div class="card">
                        <h2>ü§ñ AI - Tr·ª£ L√Ω T·∫≠p Luy·ªán</h2>
                        <p class="description">M√¥ t·∫£ m·ª•c ti√™u c·ªßa b·∫°n, AI s·∫Ω t·∫°o m·ªôt bu·ªïi t·∫≠p t·ªëi ∆∞u d√†nh ri√™ng cho b·∫°n.</p>
                        <div class="ai-builder-form">
                            <textarea id="ai-workout-prompt" placeholder="V√≠ d·ª•: 'T·∫°o bu·ªïi t·∫≠p ch√¢n v√† b·ª•ng trong 90 ph√∫t, t·∫≠p trung v√†o s·ª©c m·∫°nh'"></textarea>
                            <button id="generate-ai-workout" class="btn btn-primary">T·∫°o Bu·ªïi T·∫≠p</button>
                        </div>
                    </div>

                    <!-- Workout History -->
                    <div class="card">
                        <div id="history-table-container">
                            <div class="history-controls">
                                <h2>L·ªãch s·ª≠ t·∫≠p luy·ªán</h2>
                                <div class="data-controls">
                                    <button id="export-data" class="btn btn-success">üì§ Xu·∫•t d·ªØ li·ªáu</button>
                                    <input type="file" id="import-file" accept=".json" style="display: none;">
                                    <button id="import-data" class="btn btn-secondary">üì• Nh·∫≠p d·ªØ li·ªáu</button>
                                    <button id="delete-all" class="btn btn-danger">üóëÔ∏è X√≥a t·∫•t c·∫£</button>
                                </div>
                            </div>
                            <div class="table-container">
                                <table id="history-table">
                                    <thead>
                                        <tr>
                                            <th>Ng√†y</th>
                                            <th>Nh√≥m c∆°</th>
                                            <th>B√†i t·∫≠p</th>
                                            <th>D·ª•ng c·ª•</th>
                                            <th>Chi ti·∫øt Sets</th>
                                            <th>T·ªïng kh·ªëi l∆∞·ª£ng</th>
                                            <th>Ghi ch√∫</th>
                                            <th>Thao t√°c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="history-body">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="chart-section">
                <h2>üìà Bi·ªÉu ƒë·ªì so s√°nh b√†i t·∫≠p</h2>
                <div class="chart-controls">
                    <select id="chart-exercise">
                        <option value="">Ch·ªçn b√†i t·∫≠p</option>
                    </select>
                    <select id="chart-metric">
                        <option value="weight">M·ª©c t·∫° (kg)</option>
                        <option value="reps">S·ªë l·∫ßn l·∫∑p (reps)</option>
                        <option value="volume">T·ªïng kh·ªëi l∆∞·ª£ng (kg √ó reps)</option>
                    </select>
                    <select id="chart-period">
                        <option value="7">7 ng√†y g·∫ßn nh·∫•t</option>
                        <option value="30">30 ng√†y g·∫ßn nh·∫•t</option>
                        <option value="90">90 ng√†y g·∫ßn nh·∫•t</option>
                        <option value="all">T·∫•t c·∫£</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="progress-chart"></canvas>
                </div>
            </div>

            <!-- Statistics Section -->
            <div class="chart-section">
                <h2>üìä Th·ªëng k√™ t·ªïng quan</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>T·ªïng kh·ªëi l∆∞·ª£ng (7 ng√†y qua)</h3>
                        <div id="total-volume" class="stat-value">0 kg</div>
                    </div>
                    <div class="stat-card">
                        <h3>T·ªïng s·ªë bu·ªïi t·∫≠p</h3>
                        <div id="total-workouts" class="stat-value">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>B√†i t·∫≠p ƒë∆∞·ª£c t·∫≠p nhi·ªÅu nh·∫•t</h3>
                        <div id="most-exercised" class="stat-value">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>Nh√≥m c∆° t·∫≠p nhi·ªÅu nh·∫•t</h3>
                        <div id="most-muscle-group" class="stat-value">-</div>
                    </div>
                </div>
            </div>

            <!-- AI Recommendations Section -->
            <div class="chart-section">
                <h2>üéØ G·ª£i √Ω t·∫≠p luy·ªán th√¥ng minh</h2>
                <div id="ai-recommendations" class="card">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>ƒêang ph√¢n t√≠ch d·ªØ li·ªáu t·∫≠p luy·ªán...</p>
                    </div>
                </div>
            </div>

            <!-- Personal Records Section -->
            <div class="chart-section">
                <h2>üèÜ K·ª∑ l·ª•c c√° nh√¢n (PR)</h2>
                <div id="personal-records" class="card">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>ƒêang t·∫£i k·ª∑ l·ª•c c√° nh√¢n...</p>
                    </div>
                </div>
            </div>

            <!-- Activity Calendar Section -->
            <div class="chart-section">
                <h2>üìÖ L·ªãch ho·∫°t ƒë·ªông</h2>
                <div id="activity-calendar" class="card">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>ƒêang t·∫°o l·ªãch ho·∫°t ƒë·ªông...</p>
                    </div>
                </div>
            </div>

            <!-- Muscle Heatmap Section -->
            <div class="chart-section">
                <h2>üî• B·∫£n ƒë·ªì nhi·ªát nh√≥m c∆°</h2>
                <div id="muscle-heatmap" class="card">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>ƒêang ph√¢n t√≠ch nh√≥m c∆°...</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal ƒêƒÉng nh·∫≠p/ƒêƒÉng k√Ω Email -->
    <div id="auth-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <span id="close-auth-modal" class="close">&times;</span>
            <h2 id="auth-modal-title">ƒêƒÉng nh·∫≠p</h2>
            <form id="auth-form">
                <div class="form-group">
                    <label for="auth-email">Email</label>
                    <input type="email" id="auth-email" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="auth-password">M·∫≠t kh·∫©u</label>
                    <input type="password" id="auth-password" required autocomplete="current-password">
                </div>
                <div id="auth-error" class="error-message" style="color:red;"></div>
                <button type="submit" id="auth-submit-btn" class="btn btn-primary">ƒêƒÉng nh·∫≠p</button>
            </form>
            <a href="#" id="auth-toggle-link">Ch∆∞a c√≥ t√†i kho·∫£n? ƒêƒÉng k√Ω</a>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    
    <!-- Main App Script -->
    <script src="app.js"></script>
</body>
</html>